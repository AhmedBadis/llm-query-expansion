description: "Query Expansion Prompt Testing"

# Load prompts from separate files
prompts:
  - file://append.txt
  - file://reformulate.txt
  - file://analyze_generate_refine.txt

# Test with Together AI (OpenAI-compatible)
providers:
  - id: openai:chat:mistralai/Mistral-7B-Instruct-v0.3
    config:
      apiKey: "{{env.TOGETHER_API_KEY}}"
      apiBaseUrl: https://api.together.xyz/v1
      temperature: 0.7
      max_tokens: 100

# Test cases - different query types
tests:
  - vars:
      query: "information retrieval"
    assert:
      - type: icontains-any
        value:
          - search
          - document
          - retrieval
          - indexing
          - ranking
          - data
          - knowledge
          - content
          - acquisition
          - extraction

  - vars:
      query: "machine learning"
    assert:
      - type: icontains-any
        value:
          - AI
          - neural
          - deep learning
          - algorithm
          - model
          - training
          - artificial intelligence
          - supervised
          - unsupervised

  - vars:
      query: "natural language processing"
    assert:
      - type: icontains-any
        value:
          - NLP
          - text
          - language
          - semantic
          - parsing
          - understanding
          - computational
          - linguistics

  - vars:
      query: "covid vaccine efficacy"
    assert:
      - type: icontains-any
        value:
          - vaccine
          - efficacy
          - immunity
          - clinical
          - trial
          - protection
          - effectiveness
          - COVID
          - SARS

  - vars:
      query: "climate change effects"
    assert:
      - type: icontains-any
        value:
          - global warming
          - temperature
          - environment
          - carbon
          - emissions
          - impact
          - warming
          - sea level

  - vars:
      query: "python"
    assert:
      - type: icontains-any
        value:
          - programming
          - code
          - snake
          - language
          - script
          - development
          - coding

  - vars:
      query: "distributed database consistency"
    assert:
      - type: icontains-any
        value:
          - CAP
          - ACID
          - replication
          - partition
          - consistency
          - availability
          - distributed
          - data
          - integrity
          - harmony

# Default settings for all tests
defaultTest:
  assert:
    - type: javascript
      value: output.length > 10
    - type: javascript
      value: output.length < 1000